# Changelog

## [3.4.0] - 2026-02-23

### Added
- **`[=]` Unchanged indicator**: Commands and skills whose converted content is identical to the existing target are now reported as `[=]` (Blue) instead of `[M]`, with file writes skipped for unchanged files

### Fixed
- **Skill conversion: remove `_claude_` prefix pattern**: Skill fields are now passed through as-is (like commands), instead of being stored with `_claude_*` prefix in target frontmatter. Lossy conversion is handled by the Chimera hub. This simplifies the codebase and makes skill conversion consistent with command conversion.

## [3.2.0] - 2026-02-23

### Added
- **`acs version` subcommand**: Display the current version number

## [3.1.0] - 2026-02-23

### Added
- **`acs status` subcommand**: Show Chimera hub status with ASCII art evolution
  - Displays evolving Chimera ASCII art (Ghost at Lv.0 through 10 animal forms)
  - Shows detected agents, composition, and command/skill counts in a speech bubble
  - Scans Chimera hub `_chimera` frontmatter sections to detect synced agents

## [3.0.0] - 2026-02-22

### Breaking Changes
- **CLI subcommand architecture**: Replaced flat CLI options with subcommands
  - `acs sync -s <src> -d <dest>` for direct conversion
  - `acs import <agent>` shorthand for `acs sync -s <agent> -d chimera`
  - `acs drift <agent>` shorthand for `acs sync -s <agent> -d chimera -n`
  - `acs apply <agent>` shorthand for `acs sync -s chimera -d <agent>`
  - `acs plan <agent>` shorthand for `acs sync -s chimera -d <agent> -n`
- Noop messages now reflect the subcommand used (e.g., "Use `acs import` to apply changes" for `drift`)

### Added
- **Chimera virtual agent**: Lossless conversion hub that preserves all agent-specific settings in `_chimera` frontmatter sections
  - Import from any agent merges extras into per-agent namespaces
  - Apply to any agent restores agent-specific settings from stored extras
  - Supports both commands and skills
- **GitHub Copilot support**: Added as 5th agent format (`.prompt.md` with YAML frontmatter)
- **Cursor support**: Added as 6th agent format (plain Markdown, no frontmatter)
- Chimera hub workflow documentation (`docs/chimera-hub-workflow.md`)

### Changed
- **Agent Registry pattern**: Unified parser/converter into single agent class per agent
  - Replaced switch statements with type-safe registry lookup
  - Dynamic CLI option generation from registry
- Test suite expansion: 250 → 381 tests

## [2.2.1] - 2026-02-21

### Fixed
- Use absolute GitHub URLs for README images to fix npm display
- Add `--run` flag to vitest to prevent watch mode during publish

## [2.2.0] - 2026-02-21

### Added
- **Skills support**: Bidirectional conversion of Skills (directory-based prompts with `SKILL.md` + support files) between Claude Code, Gemini CLI, and Codex CLI
  - Support file handling (text and binary files copied as-is)
  - Codex `agents/openai.yaml` generation from Claude's `disable-model-invocation`
  - `--sync-delete` support for orphaned skill directories
- **Content type filtering**: New `-t, --type` option to convert `commands`, `skills`, or `both` (default: `both`)

### Changed
- **SemanticIR hub-and-spoke architecture**: Replaced 12 pairwise converters with 6 bidirectional `SemanticConverter` implementations
  - Body content tokenized as `BodySegment[]` for IR-level placeholder conversion
  - Type-driven `PlaceholderSerializers` registry with compile-time exhaustiveness checking
  - Claude/Codex shared body patterns extracted into common module
- **Test suite expansion**: 182 → 250 tests
  - Added Codex body parse/serialize tests, skill-utils tests, writeToDirectory tests
  - Added skill conversion and syncDelete integration tests
  - Added file search function tests
  - Removed meaningless placeholder test

### Fixed
- Shell command syntax in documentation corrected to `` !`command` ``
- Biome lint now correctly excludes coverage directory

## [2.1.0] - 2025-01-08

### Added
- **File reference conversion**: Added automatic conversion of file reference syntax between Claude Code (`@path/to/file`) and Gemini CLI (`@{path/to/file}`)
- **Individual argument placeholders documentation**: Documented support for `$1` through `$9` placeholders in Claude Code and Codex CLI

### Changed
- Improved README documentation with clearer format comparison tables
  - Separated into "File Structure and Metadata" and "Content Placeholders and Syntax" sections
  - Added detailed explanations for all placeholder types

### Fixed
- File reference patterns now correctly handle various file paths and extensions

## [2.0.0] - 2025-01-07

### Breaking Changes
- Renamed package from `agent-slash-sync` to `agent-command-sync`
- Renamed command from `assync` to `acsync`
- Changed `-d, --dry-run` option to `-n, --noop`
- Removed `-c, --convert` option; now use `-s, --src` and `-d, --dest` to specify source and destination
- Package URLs have changed:
  - npm: `https://www.npmjs.com/package/agent-slash-sync` → `https://www.npmjs.com/package/agent-command-sync`
  - GitHub: `https://github.com/hatappo/agent-slash-sync` → `https://github.com/hatappo/agent-command-sync`

### Added
- **Codex CLI support**: Added support for Codex CLI as a third tool format
  - Supports markdown with optional YAML frontmatter
  - Bidirectional conversion between Claude Code, Gemini CLI, and Codex CLI
  - Frontmatter preservation when `--remove-unsupported` is not specified
- **Intermediate Representation (IR) architecture**: Completely rewrote the conversion system
  - Centralized conversion logic through intermediate representation
  - Easier to add new tool formats in the future
  - More maintainable and testable codebase

### Changed
- Translated all inline comments from Japanese to English
- Improved error handling and validation throughout the codebase

### Dependencies
- Updated to latest versions of all dependencies

## [1.2.0] - Previous release
- Added support for custom base directories with `--claude-dir` and `--gemini-dir` options